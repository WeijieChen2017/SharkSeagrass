# 'PET TOFNAC E4055 B100'  'PET TOFNAC E4084 B100'  'PET TOFNAC E4115 B100'
# 'PET TOFNAC E4058 B100'  'PET TOFNAC E4087 B100'  'PET TOFNAC E4118 B100'
# 'PET TOFNAC E4061 B100'  'PET TOFNAC E4091 B100'  'PET TOFNAC E4120 B100'
# 'PET TOFNAC E4063 B100'  'PET TOFNAC E4092 B100'  'PET TOFNAC E4124 B100'
# 'PET TOFNAC E4066 B100'  'PET TOFNAC E4094 B100'  'PET TOFNAC E4125 B100'
# 'PET TOFNAC E4068 B100'  'PET TOFNAC E4096 B100'  'PET TOFNAC E4128 B100'
# 'PET TOFNAC E4069 B100'  'PET TOFNAC E4097 B100'  'PET TOFNAC E4129 B100'
# 'PET TOFNAC E4073 B100'  'PET TOFNAC E4098 B100'  'PET TOFNAC E4130 B100'
# 'PET TOFNAC E4074 B100'  'PET TOFNAC E4099 B100'  'PET TOFNAC E4131 B100'
# 'PET TOFNAC E4077 B100'  'PET TOFNAC E4102 B100'  'PET TOFNAC E4134 B100'
# 'PET TOFNAC E4078 B100'  'PET TOFNAC E4103 B100'  'PET TOFNAC E4137 B100'
# 'PET TOFNAC E4079 B100'  'PET TOFNAC E4105 B100'  'PET TOFNAC E4138 B100'
# 'PET TOFNAC E4080 B100'  'PET TOFNAC E4106 B100'  'PET TOFNAC E4139 B100'
# 'PET TOFNAC E4081 B100'  'PET TOFNAC E4114 B100'

tag_list = [
    "E4055", "E4058", "E4061", "E4063", "E4066",
    "E4068", "E4069", "E4073", "E4074", "E4077",
    "E4078", "E4079", "E4080", "E4081", "E4084",
    "E4087", "E4091", "E4092", "E4094", "E4096",
    "E4097", "E4098", "E4099", "E4102", "E4103",
    "E4105", "E4106", "E4114", "E4115", "E4118",
    "E4120", "E4124", "E4125", "E4128", "E4129",
    "E4130", "E4131", "E4134", "E4137", "E4138",
    "E4139",
]
# import os
# for tag in tag_list:
#     cmd = f"cp CTACIVV_{tag[1:]}.nii /shares/mimrtl/Users/Winston/files_to_dgx/SharkSeagrass/"
#     print(cmd)

# # gzip all files
# cmd = "gzip "
# for tag in tag_list:
#     cmd += f"CTACIVV_{tag[1:]}.nii "
# print(cmd)

# # output will be
# cmd = "gzip CTACIVV_4055.nii CTACIVV_4058.nii CTACIVV_4061.nii CTACIVV_4063.nii CTACIVV_4066.nii CTACIVV_4068.nii CTACIVV_4069.nii CTACIVV_4073.nii CTACIVV_4074.nii CTACIVV_4077.nii CTACIVV_4078.nii CTACIVV_4079.nii CTACIVV_4080.nii CTACIVV_4081.nii CTACIVV_4084.nii CTACIVV_4087.nii CTACIVV_4091.nii CTACIVV_4092.nii CTACIVV_4094.nii CTACIVV_4096.nii CTACIVV_4097.nii CTACIVV_4098.nii CTACIVV_4099.nii CTACIVV_4102.nii CTACIVV_4103.nii CTACIVV_4105.nii CTACIVV_4106.nii CTACIVV_4114.nii CTACIVV_4115.nii CTACIVV_4118.nii CTACIVV_4120.nii CTACIVV_4124.nii CTACIVV_4125.nii CTACIVV_4128.nii CTACIVV_4129.nii CTACIVV_4130.nii CTACIVV_4131.nii CTACIVV_4134.nii CTACIVV_4137.nii CTACIVV_4138.nii CTACIVV_4139.nii"

#  PET_TOFNAC_E4055_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170421085741_5.nii
#  PET_TOFNAC_E4058_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170204124826_5.nii
#  PET_TOFNAC_E4061_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170121114202_5.nii
# 'PET_TOFNAC_E4063_B100_5.8_PET_CT_(1.8m)_WB_HEAD_TO_FEET_(FEET_IN,_5'\''11_--6'\''3_)_20170130085046_5.nii'
#  PET_TOFNAC_E4066_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170422103620_5.nii
#  PET_TOFNAC_E4068_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170217115607_5.nii
#  PET_TOFNAC_E4069_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170128114753_5.nii
# 'PET_TOFNAC_E4073_B100_5.4_PET_CT_WB_REG_TABLE_HEAD_TO_FEET_(HEAD_IN,_UP_TO_5'\''4_)_20170204100835_5.nii'
#  PET_TOFNAC_E4074_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170302113826_5.nii
#  PET_TOFNAC_E4077_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170210105129_5.nii
#  PET_TOFNAC_E4078_B100_5.1_PET_CT_HEAD_TO_PELVIS_20171116113128_5.nii
#  PET_TOFNAC_E4079_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170212090413_5.nii
# 'PET_TOFNAC_E4080_B100_5.7_PET_CT_(2m)_WB_HEAD_TO_FEET_(FEET_IN,_6'\''3_+++)_20170204090439_5.nii'
#  PET_TOFNAC_E4081_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170323113257_5.nii
#  PET_TOFNAC_E4084_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170324085841_5.nii
# 'PET_TOFNAC_E4087_B100_5.7_PET_CT_(2m)_WB_HEAD_TO_FEET_(FEET_IN,_6'\''3_+++)_20170519095346_5.nii'
# 'PET_TOFNAC_E4091_B100_5.4_PET_CT_WB_REG_TABLE_HEAD_TO_FEET_(HEAD_IN,_UP_TO_5'\''4_)_20170309134559_5.nii'
#  PET_TOFNAC_E4092_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170310104511_5.nii
#  PET_TOFNAC_E4094_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170213135043_5.nii
#  PET_TOFNAC_E4096_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170429085017_5.nii
# 'PET_TOFNAC_E4097_B100_5.9_PET_CT_(2m)_WB_FEET_TO_HEAD_20170304115940_5.nii'
#  PET_TOFNAC_E4098_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170302133037_5.nii
#  PET_TOFNAC_E4099_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170327105032_5.nii
# 'PET_TOFNAC_E4102_B100_5.7_PET_CT_(2m)_WB_HEAD_TO_FEET_(FEET_IN,_6'\''3_+++)_20170819121826_5.nii'
#  PET_TOFNAC_E4103_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170220132322_5.nii
#  PET_TOFNAC_E4105_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170227085717_5.nii
#  PET_TOFNAC_E4106_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170402110347_5.nii
#  PET_TOFNAC_E4114_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170306105211_5.nii
#  PET_TOFNAC_E4115_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170421104102_5.nii
#  PET_TOFNAC_E4118_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170421112735_5.nii
#  PET_TOFNAC_E4120_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170312102156_5.nii
#  PET_TOFNAC_E4124_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170421131143_5.nii
#  PET_TOFNAC_E4125_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170311135526_5.nii
#  PET_TOFNAC_E4128_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170317105547_5.nii
# 'PET_TOFNAC_E4129_B100_5.4_PET_CT_WB_REG_TABLE_HEAD_TO_FEET_(HEAD_IN,_UP_TO_5'\''4_)_20170617085520_5.nii'
#  PET_TOFNAC_E4130_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170401101057_5.nii
#  PET_TOFNAC_E4131_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170413110841_5.nii
#  PET_TOFNAC_E4134_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170414104935_5.nii
#  PET_TOFNAC_E4137_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170325084653_5.nii

# mv PET_TOFNAC_E4055_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170421085741_5.nii PET_TOFNAC_E4055.nii
# mv PET_TOFNAC_E4058_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170204124826_5.nii PET_TOFNAC_E4058.nii
# mv PET_TOFNAC_E4061_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170121114202_5.nii PET_TOFNAC_E4061.nii
# mv 'PET_TOFNAC_E4063_B100_5.8_PET_CT_(1.8m)_WB_HEAD_TO_FEET_(FEET_IN,_5'\''11_--6'\''3_)_20170130085046_5.nii' PET_TOFNAC_E4063.nii
# mv PET_TOFNAC_E4066_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170422103620_5.nii PET_TOFNAC_E4066.nii
# mv PET_TOFNAC_E4068_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170217115607_5.nii PET_TOFNAC_E4068.nii
# mv PET_TOFNAC_E4069_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170128114753_5.nii PET_TOFNAC_E4069.nii
# mv 'PET_TOFNAC_E4073_B100_5.4_PET_CT_WB_REG_TABLE_HEAD_TO_FEET_(HEAD_IN,_UP_TO_5'\''4_)_20170204100835_5.nii' PET_TOFNAC_E4073.nii
# mv PET_TOFNAC_E4074_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170302113826_5.nii PET_TOFNAC_E4074.nii
# mv PET_TOFNAC_E4077_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170210105129_5.nii PET_TOFNAC_E4077.nii
# mv PET_TOFNAC_E4078_B100_5.1_PET_CT_HEAD_TO_PELVIS_20171116113128_5.nii PET_TOFNAC_E4078.nii
# mv PET_TOFNAC_E4079_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170212090413_5.nii PET_TOFNAC_E4079.nii
# mv 'PET_TOFNAC_E4080_B100_5.7_PET_CT_(2m)_WB_HEAD_TO_FEET_(FEET_IN,_6'\''3_+++)_20170204090439_5.nii' PET_TOFNAC_E4080.nii
# mv PET_TOFNAC_E4081_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170323113257_5.nii PET_TOFNAC_E4081.nii
# mv PET_TOFNAC_E4084_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170324085841_5.nii PET_TOFNAC_E4084.nii
# mv 'PET_TOFNAC_E4087_B100_5.7_PET_CT_(2m)_WB_HEAD_TO_FEET_(FEET_IN,_6'\''3_+++)_20170519095346_5.nii' PET_TOFNAC_E4087.nii
# mv 'PET_TOFNAC_E4091_B100_5.4_PET_CT_WB_REG_TABLE_HEAD_TO_FEET_(HEAD_IN,_UP_TO_5'\''4_)_20170309134559_5.nii' PET_TOFNAC_E4091.nii
# mv PET_TOFNAC_E4092_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170310104511_5.nii PET_TOFNAC_E4092.nii
# mv PET_TOFNAC_E4094_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170213135043_5.nii PET_TOFNAC_E4094.nii
# mv PET_TOFNAC_E4096_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170429085017_5.nii PET_TOFNAC_E4096.nii
# mv 'PET_TOFNAC_E4097_B100_5.9_PET_CT_(2m)_WB_FEET_TO_HEAD_20170304115940_5.nii' PET_TOFNAC_E4097.nii
# mv PET_TOFNAC_E4098_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170302133037_5.nii PET_TOFNAC_E4098.nii
# mv PET_TOFNAC_E4099_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170327105032_5.nii PET_TOFNAC_E4099.nii
# mv 'PET_TOFNAC_E4102_B100_5.7_PET_CT_(2m)_WB_HEAD_TO_FEET_(FEET_IN,_6'\''3_+++)_20170819121826_5.nii' PET_TOFNAC_E4102.nii
# mv PET_TOFNAC_E4103_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170220132322_5.nii PET_TOFNAC_E4103.nii
# mv PET_TOFNAC_E4105_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170227085717_5.nii PET_TOFNAC_E4105.nii
# mv PET_TOFNAC_E4106_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170402110347_5.nii PET_TOFNAC_E4106.nii
# mv PET_TOFNAC_E4114_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170306105211_5.nii PET_TOFNAC_E4114.nii
# mv PET_TOFNAC_E4115_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170421104102_5.nii PET_TOFNAC_E4115.nii
# mv PET_TOFNAC_E4118_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170421112735_5.nii PET_TOFNAC_E4118.nii
# mv PET_TOFNAC_E4120_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170312102156_5.nii PET_TOFNAC_E4120.nii
# mv PET_TOFNAC_E4124_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170421131143_5.nii PET_TOFNAC_E4124.nii
# mv PET_TOFNAC_E4125_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170311135526_5.nii PET_TOFNAC_E4125.nii
# mv PET_TOFNAC_E4128_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170317105547_5.nii PET_TOFNAC_E4128.nii
# mv 'PET_TOFNAC_E4129_B100_5.4_PET_CT_WB_REG_TABLE_HEAD_TO_FEET_(HEAD_IN,_UP_TO_5'\''4_)_20170617085520_5.nii' PET_TOFNAC_E4129.nii
# mv PET_TOFNAC_E4130_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170401101057_5.nii PET_TOFNAC_E4130.nii
# mv PET_TOFNAC_E4131_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170413110841_5.nii PET_TOFNAC_E4131.nii
# mv PET_TOFNAC_E4134_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170414104935_5.nii PET_TOFNAC_E4134.nii
# mv PET_TOFNAC_E4137_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170325084653_5.nii PET_TOFNAC_E4137.nii
# mv PET_TOFNAC_E4138_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170325093015_5.nii PET_TOFNAC_E4138.nii
# mv PET_TOFNAC_E4139_B100_5.1_PET_CT_HEAD_TO_PELVIS_20170427104545_5.nii PET_TOFNAC_E4139.nii

# gzip cmd:
# gzip PET_TOFNAC_E4055.nii PET_TOFNAC_E4058.nii PET_TOFNAC_E4061.nii PET_TOFNAC_E4063.nii PET_TOFNAC_E4066.nii PET_TOFNAC_E4068.nii PET_TOFNAC_E4069.nii PET_TOFNAC_E4073.nii PET_TOFNAC_E4074.nii PET_TOFNAC_E4077.nii PET_TOFNAC_E4078.nii PET_TOFNAC_E4079.nii PET_TOFNAC_E4080.nii PET_TOFNAC_E4081.nii PET_TOFNAC_E4084.nii PET_TOFNAC_E4087.nii PET_TOFNAC_E4091.nii PET_TOFNAC_E4092.nii PET_TOFNAC_E4094.nii PET_TOFNAC_E4096.nii PET_TOFNAC_E4097.nii PET_TOFNAC_E4098.nii PET_TOFNAC_E4099.nii PET_TOFNAC_E4102.nii PET_TOFNAC_E4103.nii PET_TOFNAC_E4105.nii PET_TOFNAC_E4106.nii PET_TOFNAC_E4114.nii PET_TOFNAC_E4115.nii PET_TOFNAC_E4118.nii PET_TOFNAC_E4120.nii PET_TOFNAC_E4124.nii PET_TOFNAC_E4125.nii PET_TOFNAC_E4128.nii PET_TOFNAC_E4129.nii PET_TOFNAC_E4130.nii PET_TOFNAC_E4131.nii PET_TOFNAC_E4134.nii PET_TOFNAC_E4137.nii PET_TOFNAC_E4138.nii PET_TOFNAC_E4139.nii



# here we load the data
import os
import nibabel as nib
import numpy as np

for tag in tag_list:
    CT_path = f"./B100/CTACIVV/CTACIVV_{tag[1:]}.nii.gz"
    PET_path = f"./B100/PET_TOFNAC/PET_TOFNAC_{tag}.nii.gz"
    CT_file = nib.load(CT_path)
    PET_file = nib.load(PET_path)
    CT_data = CT_file.get_fdata()
    PET_data = PET_file.get_fdata()

    print("<"*50)
    print(f"File: CTACIVV_{tag[1:]}.nii.gz")
    print(f"CT shape: {CT_data.shape}, CT_max: {np.max(CT_data)}, CT_min: {np.min(CT_data)}")
    print(f"CT mean: {np.mean(CT_data)}, CT std: {np.std(CT_data)}")
    print(f"CT 95th percentile: {np.percentile(CT_data, 95)}")
    print(f"CT 99th percentile: {np.percentile(CT_data, 99)}")
    print(f"CT 99.9th percentile: {np.percentile(CT_data, 99.9)}")
    print(f"CT 99.99th percentile: {np.percentile(CT_data, 99.99)}")
    print(f"CT physcial spacing: {CT_file.header.get_zooms()}")
    print(f"CT physical range: {CT_file.header.get_zooms() * np.array(CT_data.shape)}")
    print(">"*50)
    print(f"File: PET_TOFNAC_{tag}.nii.gz")
    print(f"PET shape: {PET_data.shape}, PET_max: {np.max(PET_data)}, PET_min: {np.min(PET_data)}")
    print(f"PET mean: {np.mean(PET_data)}, PET std: {np.std(PET_data)}")
    print(f"PET 95th percentile: {np.percentile(PET_data, 95)}")
    print(f"PET 99th percentile: {np.percentile(PET_data, 99)}")
    print(f"PET 99.9th percentile: {np.percentile(PET_data, 99.9)}")
    print(f"PET 99.99th percentile: {np.percentile(PET_data, 99.99)}")
    print(f"PET physcial spacing: {PET_file.header.get_zooms()}")
    print(f"PET physical range: {PET_file.header.get_zooms() * np.array(PET_data.shape)}")

    print("<--->")
